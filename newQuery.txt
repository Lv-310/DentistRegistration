USE LV_310_DENTISTRY;

GO

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES 
           WHERE TABLE_NAME = 'CALENDAR_EVENT_RULE')
BEGIN
	CREATE TABLE CALENDAR_EVENT_RULE(RULE_ID INT NOT NULL,
	ISINCLUDE BIT NOT NULL,
	STARTDATE DATETIME NOT NULL,
	TIMETOFINISH BIGINT NOT NULL,
	EVENTDURATION BIGINT NOT NULL,
	REPEATINTERVAL BIGINT NOT NULL,
	DATEEXPIRE DATETIME NOT NULL,
	CONSTRAINT PK_RULES PRIMARY KEY (RULE_ID))
END;

GO

IF object_id('spDeleteEventRule') IS NULL
    EXEC ('create procedure dbo.spDeleteEventRule as select 1')
GO
ALTER PROCEDURE spDeleteEventRule
@RULE_ID INT
AS
BEGIN
DELETE FROM CALENDAR_EVENT_RULE
WHERE RULE_ID=@RULE_ID
END;
